{"remainingRequest":"D:\\front-end files\\test\\my-gridsome\\node_modules\\babel-loader\\lib\\index.js??ref--1-1!D:\\front-end files\\test\\my-gridsome\\node_modules\\gridsome\\app\\graphql\\guard.js","dependencies":[{"path":"D:\\front-end files\\test\\my-gridsome\\node_modules\\gridsome\\app\\graphql\\guard.js","mtime":1628149246770},{"path":"D:\\front-end files\\test\\my-gridsome\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1628149244789},{"path":"D:\\front-end files\\test\\my-gridsome\\node_modules\\babel-loader\\lib\\index.js","mtime":1628149244548}],"contextDependencies":[],"result":["import \"core-js/modules/es.function.name.js\";\nimport fetch from '../fetch';\nimport config from '~/.temp/config';\nimport { getResults, setResults, formatError } from './shared';\nexport default (function (to, from, next) {\n  if (process.isServer) return next(); // A custom route added by `router.addRoutes()`.\n\n  if (to.meta && to.meta.__custom) {\n    global.__INITIAL_STATE__ = null;\n    return next();\n  }\n\n  var cached = getResults(to.path); // Stop here if data for the next page is already fetched.\n\n  if (cached) {\n    return cached.context.__notFound && to.name !== '*' ? next({\n      name: '*',\n      params: {\n        0: to.path\n      }\n    }) : next();\n  } // The data already exists in the markup for the initial page.\n\n\n  if (process.isProduction && global.__INITIAL_STATE__) {\n    var context = global.__INITIAL_STATE__.context;\n    setResults(to.path, global.__INITIAL_STATE__);\n    global.__INITIAL_STATE__ = null;\n    return context.__notFound && to.name !== '*' ? next({\n      name: '*',\n      params: {\n        0: to.path\n      }\n    }) : next();\n  }\n\n  fetch(to).then(function (res) {\n    if (res.code === 404) {\n      next({\n        name: '*',\n        params: {\n          0: to.path\n        }\n      });\n    } else {\n      setResults(to.path, res);\n      next();\n    }\n  })[\"catch\"](function (err) {\n    if (err.code === 'MODULE_NOT_FOUND' || err.code === 404) {\n      console.error(err);\n      next({\n        name: '*',\n        params: {\n          0: to.path\n        }\n      });\n    } else if (err.code === 'INVALID_HASH' && to.path !== window.location.pathname) {\n      var _config$pathPrefix;\n\n      var fullPathWithPrefix = ((_config$pathPrefix = config.pathPrefix) !== null && _config$pathPrefix !== void 0 ? _config$pathPrefix : '') + to.fullPath;\n      window.location.assign(fullPathWithPrefix);\n    } else {\n      formatError(err, to);\n      next(err);\n    }\n  });\n});",{"version":3,"sources":["D:/front-end files/test/my-gridsome/node_modules/gridsome/app/graphql/guard.js"],"names":["fetch","config","getResults","setResults","formatError","to","from","next","process","isServer","meta","__custom","global","__INITIAL_STATE__","cached","path","context","__notFound","name","params","isProduction","then","res","code","err","console","error","window","location","pathname","fullPathWithPrefix","pathPrefix","fullPath","assign"],"mappings":"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","sourcesContent":["import fetch from '../fetch'\r\nimport config from '~/.temp/config'\r\nimport { getResults, setResults, formatError } from './shared'\r\n\r\nexport default (to, from, next) => {\r\n  if (process.isServer) return next()\r\n\r\n  // A custom route added by `router.addRoutes()`.\r\n  if (to.meta && to.meta.__custom) {\r\n    global.__INITIAL_STATE__ = null\r\n    return next()\r\n  }\r\n\r\n  const cached = getResults(to.path)\r\n\r\n  // Stop here if data for the next page is already fetched.\r\n  if (cached) {\r\n    return cached.context.__notFound && to.name !== '*'\r\n      ? next({ name: '*', params: { 0: to.path }})\r\n      : next()\r\n  }\r\n\r\n  // The data already exists in the markup for the initial page.\r\n  if (process.isProduction && global.__INITIAL_STATE__) {\r\n    const { context } = global.__INITIAL_STATE__\r\n    setResults(to.path, global.__INITIAL_STATE__)\r\n    global.__INITIAL_STATE__ = null\r\n\r\n    return context.__notFound && to.name !== '*'\r\n      ? next({ name: '*', params: { 0: to.path }})\r\n      : next()\r\n  }\r\n\r\n  fetch(to)\r\n    .then(res => {\r\n      if (res.code === 404) {\r\n        next({ name: '*', params: { 0: to.path }})\r\n      } else {\r\n        setResults(to.path, res)\r\n        next()\r\n      }\r\n    })\r\n    .catch(err => {\r\n      if (err.code === 'MODULE_NOT_FOUND' || err.code === 404) {\r\n        console.error(err)\r\n        next({ name: '*', params: { 0: to.path } })\r\n      } else if (err.code === 'INVALID_HASH' && to.path !== window.location.pathname) {\r\n        const fullPathWithPrefix = (config.pathPrefix ?? '') + to.fullPath\r\n        window.location.assign(fullPathWithPrefix)\r\n      } else {\r\n        formatError(err, to)\r\n        next(err)\r\n      }\r\n    })\r\n}\r\n"]}]}